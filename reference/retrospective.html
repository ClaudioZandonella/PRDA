<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Retrospective Design Analysis — retrospective • PRDA</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Retrospective Design Analysis — retrospective" />
<meta property="og:description" content="Given the hypothetical population effect size and the study sample size, the
function retrospective() performs a retrospective design analysis for
Pearson's correlation test between two variables or t-test comparing
group means (Cohen's d). According to the defined alternative
hypothesis and the significance level, inferential risks (i.e., Power level,
Type M error, and Type S error) are computed together with the critical
effect value (i.e., the minimum absolute effect size value that would result
significant)." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">PRDA</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/PRDA.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/prospective.html">Prospective Design Analysis</a>
    </li>
    <li>
      <a href="../articles/retrospective.html">Retrospective Design Analysis</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ClaudioZandonella/PRDA/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Retrospective Design Analysis</h1>
    <small class="dont-index">Source: <a href='https://github.com/ClaudioZandonella/PRDA/blob/master/R/retrospective.R'><code>R/retrospective.R</code></a></small>
    <div class="hidden name"><code>retrospective.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Given the hypothetical population effect size and the study sample size, the
function <code>retrospective()</code> performs a retrospective design analysis for
Pearson's correlation test between two variables or <em>t</em>-test comparing
group means (Cohen's <em>d</em>). According to the defined alternative
hypothesis and the significance level, inferential risks (i.e., Power level,
Type M error, and Type S error) are computed together with the critical
effect value (i.e., the minimum absolute effect size value that would result
significant).</p>
    </div>

    <pre class="usage"><span class='fu'>retrospective</span>(
  <span class='kw'>effect_size</span>,
  <span class='kw'>sample_n1</span>,
  sample_n2 = <span class='kw'>NULL</span>,
  test_method = <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"pearson"</span>, <span class='st'>"two_sample"</span>, <span class='st'>"welch"</span>, <span class='st'>"paired"</span>, <span class='st'>"one_sample"</span>),
  alternative = <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"two_sided"</span>, <span class='st'>"less"</span>, <span class='st'>"greater"</span>),
  sig_level = <span class='fl'>0.05</span>,
  ratio_sd = <span class='fl'>1</span>,
  B = <span class='fl'>10000</span>,
  tl = <span class='op'>-</span><span class='fl'>Inf</span>,
  tu = <span class='fl'>Inf</span>,
  B_effect = <span class='fl'>1000</span>,
  display_message = <span class='fl'>TRUE</span>,
  seed = <span class='kw'>NULL</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>effect_size</th>
      <td><p>a numeric value or function (see Details) indicating the
hypothetical population effect size.</p></td>
    </tr>
    <tr>
      <th>sample_n1</th>
      <td><p>a numeric value indicating the sample size of the first
group.</p></td>
    </tr>
    <tr>
      <th>sample_n2</th>
      <td><p>a numeric value indicating the sample size of the second
group. This argument is required when <code>test_method</code> is set to
<code>"two_sample"</code> or <code>"welch"</code>. In the case of <code>test_method =
"paired"</code>, set <code>sample_n2</code> equal to <code>sample_n1</code>. Whereas in the
case of <code>test_method = "one_sample"</code>, set <code>sample_n2</code> to
<code>NULL</code>. This argument is ignored for <code>test_method = "pearson"</code>.
See Test methods section in Details.</p></td>
    </tr>
    <tr>
      <th>test_method</th>
      <td><p>a character string specifying the test type, must be one of
<code>"pearson"</code> (default, Pearson's correlation), <code>"two_sample"</code>
(independent two-sample <em>t</em>-test), <code>"welch"</code> (Welch's
<em>t</em>-test), <code>"paired"</code> (dependent <em>t</em>-test for paired
samples), or <code>"one_sample"</code> (one-sample <em>t</em>-test). You can specify
just the initial letters.</p></td>
    </tr>
    <tr>
      <th>alternative</th>
      <td><p>a character string specifying the alternative hypothesis,
must be one of <code>"two_sided"</code> (default), <code>"greater"</code> or
<code>"less"</code>. You can specify just the initial letter.</p></td>
    </tr>
    <tr>
      <th>sig_level</th>
      <td><p>a numeric value indicating the significance level on which
the alternative hypothesis is evaluated.</p></td>
    </tr>
    <tr>
      <th>ratio_sd</th>
      <td><p>a numeric value indicating the ratio between the standard
deviation in the first group and in the second group. This argument is
needed in the case of Welch's <em>t</em>-test.</p></td>
    </tr>
    <tr>
      <th>B</th>
      <td><p>a numeric  value indicating the number of iterations. Increase the
number of iterations to obtain more stable results.</p></td>
    </tr>
    <tr>
      <th>tl</th>
      <td><p>optional value indicating the lower truncation point if
<code>effect_size</code> is defined as a function.</p></td>
    </tr>
    <tr>
      <th>tu</th>
      <td><p>optional value indicating the upper truncation point if
<code>effect_size</code> is defined as a function.</p></td>
    </tr>
    <tr>
      <th>B_effect</th>
      <td><p>a numeric  value indicating the number of sampled effects
if <code>effect_size</code> is defined as a function. Increase the number to
obtain more stable results.</p></td>
    </tr>
    <tr>
      <th>display_message</th>
      <td><p>a logical variable indicating whether to display or not
the progress bar. Not that this applies only when <code>effect_size</code> is
defined as a function.</p></td>
    </tr>
    <tr>
      <th>seed</th>
      <td><p>a numeric value indicating the seed for random number generation.
Set the seed to obtain reproducible results.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list with class "design_analysis" containing the following
 components:</p>
<dt>design_analysis</dt><dd><p>a character string indicating the type of design
   analysis: "retrospective".</p></dd>
   <dt>call_arguments</dt><dd><p>a list with all the arguments passed to the
   function and the raw function call.</p></dd>
   <dt>effect_info</dt><dd><p>a list with all the information regarding the
   considered hypothetical population effect size. The list includes:
   <code>effect_type</code> indicating the type of effect; <code>effect_function</code>
   indicating the function from which effect are sampled or the string
   "single_value" if a single value was provided; <code>effect_summary</code>
   summary of the sampled effects; <code>effect_samples</code> vector with the
   sampled effects (or unique value in the case of a single value). if
   relevant <code>tl</code> and <code>tu</code> specifying the lower upper truncation
   point respectively.</p></dd>
   <dt>test_info</dt><dd><p>a list with all the information regarding the test
   performed. The list includes: <code>test_method</code> character sting
   indicating the test method (i.e., "pearson", "one_sample", "paired",
   "two_sample", or "welch"); sample size (<code>sample_n1</code> and if relevant
   <code>sample_n2</code>), alternative hypothesis (<code>alternative</code>),
   significance level (<code>sig_level</code>)  and  degrees of freedom (<code>df</code>)
   of the statistical test; <code>critical_effect</code> the minimum absolute
   effect value that would result significant. Note that
   <code>critical_effect</code> in the case of <code>alternative = "two_sided"</code> is
   the absolute value and both positive and negative values should be
   considered.</p></dd>
   <dt>retrospective_res</dt><dd><p>a data frame with the results of the design
   analysis. Columns names are <code>power</code>, <code>typeM</code>, and <code>typeS</code>.</p></dd>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Conduct a retrospective design analysis to evaluate inferential risks
 according to study design. A general overview is provided in the
 <code><a href='../articles/retrospective.html'>vignette("retrospective")</a></code>.</p>
<p><strong>Population effect size</strong></p>
<p>The hypothetical population effect size (<code>effect_size</code>) can be set to a
 single value or a function that allows sampling values from a given
 distribution. The function has to be defined as <code>function(n)
 my_function(n, ...)</code>, with only one single argument <code>n</code> representing
 the number of sampled values (e.g., <code>function(n) rnorm(n, mean = 0, sd
 = 1)</code>; <code>function(n) sample(c(.1,.3,.5), n, replace = TRUE)</code>). This
 allows users to define hypothetical effect size distribution according to
 their needs.</p>
<p>Argument <code>B_effect</code> allows defining the number of sampled effects.
 Users can access sampled effects in the <code>effect_info</code> list included in
 the output to evaluate if the sample is representative of their
 specification. Increase the number to obtain more accurate results but it
 will require more computational time (default is 1000). To avoid long
 computational times, we suggest adjusting <code>B</code> when using a function to
 define the hypothetical population effect size.</p>
<p>Optional arguments <code>tl</code> and <code>tu</code> allow truncating the sampling
 distribution specifying the lower truncation point and upper  truncation
 point respectively. Note that if <code>effect_type = "correlation"</code>,
 distribution is automatically truncated between -1 and 1.</p>
<p><strong>Test methods</strong></p>
<p>The function <code>retrospective()</code> performs a retrospective design analysis
 considering correlations between two variables or comparisons between group
 means.</p>
<p>In the case of a correlation, only Pearson's correlation between two
 variables is available, whereas Kendall's <em>tau</em> and Spearman's
 <em>rho</em> are not implemented. The <code>test_method</code> argument has to be
 set to <code>"pearson"</code> (default) and the <code>effect_size</code> argument is
 used to define the hypothetical population effect size in terms of Pearson's
 correlation coefficient (\(\rho\)). The <code>sample_n2</code> argument is
 ignored.</p>
<p>In the case of a comparison between group means, the <code>effect_size</code>
 argument is used to define the hypothetical population effect size in terms
 of Cohen's <em>d</em> and the available <em>t</em>-tests are selected specifying
 the argument <code>test_method</code>. For independent two-sample <em>t</em>-test,
 use <code>"two_sample"</code> and indicate the sample size of the second group
 (<code>sample_n2</code>). For Welch's <em>t</em>-test, use <code>"welch"</code> and
 indicate and indicate the sample size of the second group (<code>sample_n2</code>)
 and the ratio between the standard deviation in the first group and in the
 second group (<code>ratio_sd</code>). For dependent <em>t</em>-test for paired
 samples, use <code>"paired"</code> (<code>sample_n1</code> and <code>sample_n2</code> have to
 be equal). For one-sample <em>t</em>-test, use <code>"one_sample"</code>
 (<code>sample_n2</code> has to be <code>NULL</code>).</p>
<p><strong>Study design</strong></p>
<p>Study design can be further defined according to statistical test
 directionality and required \(\alpha\)-level using the arguments
 <code>alternative</code> and <code>sig_level</code> respectively.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Altoè, G., Bertoldo, G., Zandonella Callegher, C., Toffalini, E.,
 Calcagnì, A., Finos, L., &amp; Pastore, M. (2020). Enhancing Statistical
 Inference in Psychological Research via Prospective and Retrospective Design
 Analysis. Frontiers in Psychology, 10.
 <a href='https://doi.org/10.3389/fpsyg.2019.02893'>https://doi.org/10.3389/fpsyg.2019.02893</a></p>
<p>Bertoldo, G., Altoè, G., &amp; Zandonella Callegher, C. (2020).
 Designing Studies and Evaluating Research Results: Type M and Type S Errors
 for Pearson Correlation Coefficient. Retrieved from
 <a href='https://psyarxiv.com/q9f86/'>https://psyarxiv.com/q9f86/</a></p>
<p>Gelman, A., &amp; Carlin, J. (2014). Beyond Power Calculations: Assessing Type S
 (Sign) and Type M (Magnitude) Errors. Perspectives on Psychological Science,
 9(6), 641–651. <a href='https://doi.org/10.1177/1745691614551642'>https://doi.org/10.1177/1745691614551642</a></p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'># Pearson's correlation</span>
<span class='fu'>retrospective</span>(effect_size = <span class='fl'>.3</span>, sample_n1 = <span class='fl'>25</span>,
              test_method = <span class='st'>"pearson"</span>, seed = <span class='fl'>2020</span>)
</div><div class='output co'>#&gt; 
#&gt; 	Design Analysis
#&gt; 
#&gt; Hypothesized effect:  rho = 0.3 
#&gt; 
#&gt; Study characteristics:
#&gt;    test_method   sample_n1   sample_n2   alternative   sig_level   df
#&gt;    pearson       25          NULL        two_sided     0.05        23
#&gt; 
#&gt; Inferential risks:
#&gt;    power   typeM   typeS
#&gt;    0.312   1.675   0.001
#&gt; 
#&gt; Critical value(s): rho  =  ± 0.396</div><div class='input'>
<span class='co'># Two-sample t-test</span>
<span class='fu'>retrospective</span>(effect_size = <span class='fl'>.3</span>, sample_n1 = <span class='fl'>25</span>, sample_n2 = <span class='fl'>35</span>,
              test_method = <span class='st'>"two_sample"</span>, seed = <span class='fl'>2020</span>)
</div><div class='output co'>#&gt; 
#&gt; 	Design Analysis
#&gt; 
#&gt; Hypothesized effect:  cohen_d = 0.3 
#&gt; 
#&gt; Study characteristics:
#&gt;    test_method   sample_n1   sample_n2   alternative   sig_level   df
#&gt;    two_sample    25          35          two_sided     0.05        58
#&gt; 
#&gt; Inferential risks:
#&gt;    power   typeM   typeS
#&gt;    0.198   2.226   0.003
#&gt; 
#&gt; Critical value(s): cohen_d  =  ± 0.524</div><div class='input'><span class='co'># Welch t-test</span>
<span class='fu'>retrospective</span>(effect_size = <span class='fl'>.3</span>, sample_n1 = <span class='fl'>25</span>, sample_n2 = <span class='fl'>35</span>,
              test_method = <span class='st'>"welch"</span>, ratio_sd = <span class='fl'>1.5</span>, seed = <span class='fl'>2020</span>)
</div><div class='output co'>#&gt; 
#&gt; 	Design Analysis
#&gt; 
#&gt; Hypothesized effect:  cohen_d = 0.3 
#&gt; 
#&gt; Study characteristics:
#&gt;    test_method   sample_n1   sample_n2   alternative   sig_level   df   
#&gt;    welch         25          35          two_sided     0.05        38.89
#&gt; 
#&gt; Inferential risks:
#&gt;    power   typeM   typeS
#&gt;    0.186   2.342   0.005
#&gt; 
#&gt; Critical value(s): cohen_d  =  ± 0.546</div><div class='input'><span class='co'># Paired t-test</span>
<span class='fu'>retrospective</span>(effect_size = <span class='fl'>.3</span>, sample_n1 = <span class='fl'>25</span>, sample_n2 = <span class='fl'>25</span>,
              test_method = <span class='st'>"paired"</span>, seed = <span class='fl'>2020</span>)
</div><div class='output co'>#&gt; 
#&gt; 	Design Analysis
#&gt; 
#&gt; Hypothesized effect:  cohen_d = 0.3 
#&gt; 
#&gt; Study characteristics:
#&gt;    test_method   sample_n1   sample_n2   alternative   sig_level   df
#&gt;    paired        25          25          two_sided     0.05        24
#&gt; 
#&gt; Inferential risks:
#&gt;    power   typeM   typeS
#&gt;    0.304   1.805   0.001
#&gt; 
#&gt; Critical value(s): cohen_d  =  ± 0.413</div><div class='input'><span class='co'># One-sample t-test</span>
<span class='fu'>retrospective</span>(effect_size = <span class='fl'>.3</span>, sample_n1 = <span class='fl'>25</span>, sample_n2 = <span class='kw'>NULL</span>,
              test_method = <span class='st'>"one_sample"</span>, seed = <span class='fl'>2020</span>)
</div><div class='output co'>#&gt; 
#&gt; 	Design Analysis
#&gt; 
#&gt; Hypothesized effect:  cohen_d = 0.3 
#&gt; 
#&gt; Study characteristics:
#&gt;    test_method   sample_n1   sample_n2   alternative   sig_level   df
#&gt;    one_sample    25          NULL        two_sided     0.05        24
#&gt; 
#&gt; Inferential risks:
#&gt;    power   typeM   typeS
#&gt;    0.304   1.853   0.002
#&gt; 
#&gt; Critical value(s): cohen_d  =  ± 0.413</div><div class='input'>



<span class='co'>if</span> (<span class='fl'>FALSE</span>) {
<span class='co'># Define effect_size using functions (long computational times)</span>
<span class='co'># Remember to adjust B</span>
<span class='fu'>retrospective</span>(effect_size = <span class='fu'>function</span>(<span class='kw'>n</span>) <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span>(<span class='kw'>n</span>, <span class='fl'>.3</span>, <span class='fl'>.1</span>), sample_n1 = <span class='fl'>25</span>,
              test_method = <span class='st'>"pearson"</span>, tl = <span class='fl'>.15</span>, B = <span class='fl'>1e3</span>, seed = <span class='fl'>2020</span>)
<span class='fu'>retrospective</span>(effect_size = <span class='fu'>function</span>(<span class='kw'>n</span>) <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span>(<span class='kw'>n</span>, <span class='fl'>.3</span>, <span class='fl'>.1</span>), sample_n1 = <span class='fl'>25</span>,
              test_method = <span class='st'>"one_sample"</span>, tl = <span class='fl'>.2</span>, tu = <span class='fl'>.4</span>, B = <span class='fl'>1e3</span>,
              seed = <span class='fl'>2020</span>)
}

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Claudio Zandonella Callegher, Massimiliano Pastore, Angela Andreella, Anna Vesely, Enrico Toffalini, Giulia Bertoldo, Gianmarco Altoè.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


